"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},TKEventEmitter=function(){function e(){this.listenersCache=new Map,this.oncedFnMap=new Map}return Object.defineProperty(e.prototype,"eventNames",{get:function(){return Array.from(this.listenersCache.keys())},enumerable:!0,configurable:!0}),e.prototype.getCache=function(e){return this.listenersCache.get(e)},e.prototype.executing=function(e){e.forEach(function(e){return globalThis.setTimeout(e,0)})},e.prototype.addEventListener=function(e,t){var r=this.getCache(e);return r?r.add(t):this.listenersCache.set(e,new Set([t])),this},e.prototype.removeAllListeners=function(e){var t=this;e?(this.listenersCache.get(e).forEach(function(e){t.oncedFnMap.delete(e)}),this.listenersCache.delete(e)):this.listenersCache=new Map},e.prototype.removeListener=function(e,t){var r=this.getCache(e);return!!r&&r.delete(t)},e.prototype.listenerCount=function(e){var t=this.getCache(e);return t?t.size:0},e.prototype.listeners=function(e){var t=this.getCache(e);return t?Array.from(t):[]},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=this.getCache(e);if(n){var i=Array.from(n).map(function(e){return e.bind.apply(e,__spreadArrays([null],t))});this.executing(i)}return this},e.prototype.off=function(e,t){var r=this.getCache(e);if(r){var n=this.oncedFnMap.get(t);return n?(this.oncedFnMap.delete(t),r.delete(n)):r.delete(t)}return!1},e.prototype.on=function(e,t){return this.addEventListener(e,t)},e.prototype.once=function(r,n){var i=this,o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{n.call.apply(n,__spreadArrays([null],e))}catch(e){throw i.off(r,o),e}};return this.oncedFnMap.set(n,o),this.addEventListener(r,o)},e}();